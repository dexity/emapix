
<div id="submit_modal" class="submit_modal modal hide fade">
    <div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	<h3>Submit Photo</h3>
    </div>
    <div class="modal-body" id="submit_body">
        <img src="{{img_src}}" />
        <form id="create_form">
            {% csrf_token %}
        </form>
        
        <div id="errors_container"></div>
        <div id="progress" style="display: none">
            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" style="width: 50%; margin-top: 20px;">
                <div class="bar" style="width:100%;"></div>
            </div>    
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" id="submit_image">Submit Image</button>
        <a href="#" onclick="show_select_click(event)">Select different file</a>
        <a href="#" data-dismiss="modal">Close</a>
    </div>
</div>

<script type="text/javascript">
    
$("#submit_image").click(function(){
    $("#progress").show();
    $.ajax({
        url:    "/submit/create/{{resource}}",
        type:   "POST",
        data:   $("#create_form").serialize(),
        cache:  false,
        success:    function(data) {
            submit_image_finished();
        },
        error:  function(jqXHR, textStatus, errorThrown) {
            $("#progress").hide();
            $("#errors_container").html(format_error(jqXHR.responseText, errorThrown));
        }
    });
})

</script>